diff -rupN a/arch/mips/ath79/dev-usb.c b/arch/mips/ath79/dev-usb.c
--- a/arch/mips/ath79/dev-usb.c
+++ b/arch/mips/ath79/dev-usb.c
@@ -11,8 +11,8 @@
  *  by the Free Software Foundation.
  */
 
-#include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/irq.h>
 #include <linux/dma-mapping.h>
@@ -20,6 +20,9 @@
 #include <linux/usb/ehci_pdriver.h>
 #include <linux/usb/ohci_pdriver.h>
 
+#include <linux/of.h>
+#include <linux/of_device.h>
+
 #include <asm/mach-ath79/ath79.h>
 #include <asm/mach-ath79/ar71xx_regs.h>
 #include "common.h"
@@ -332,3 +335,48 @@ void __init ath79_register_usb(void)
 	else
 		BUG();
 }
+
+
+static int ath79_usb_probe(struct platform_device *_pdev)
+{
+	// at the moment just a clone of ath79_register_usb()
+	if (soc_is_ar71xx())
+		ath79_usb_setup();
+	else if (soc_is_ar7240())
+		ar7240_usb_setup();
+	else if (soc_is_ar7241() || soc_is_ar7242())
+		ar724x_usb_setup();
+	else if (soc_is_ar913x())
+		ar913x_usb_setup();
+	else if (soc_is_ar933x())
+		ar933x_usb_setup();
+	else if (soc_is_ar934x())
+		ar934x_usb_setup();
+	else if (soc_is_qca953x())
+		qca953x_usb_setup();
+	else if (soc_is_qca955x())
+		qca955x_usb_setup();
+	else if (soc_is_qca956x())
+		qca956x_usb_setup();
+	else
+		BUG();
+
+	return 0;
+}
+
+static const struct of_device_id ath79_usb_of_match[] = {
+	{ .compatible = "ath79,usb" },
+	{ }
+};
+
+MODULE_DEVICE_TABLE(of, ath79_usb_of_match);
+
+static struct platform_driver ath79_usb_driver = {
+	.probe  = ath79_usb_probe,
+	.driver = {
+		.name = "ath79-usb",
+		.of_match_table = of_match_ptr(ath79_usb_of_match),
+	}
+};
+
+module_platform_driver(ath79_usb_driver);
